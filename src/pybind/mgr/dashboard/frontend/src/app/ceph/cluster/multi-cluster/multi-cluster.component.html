<div class="container-fluid p-4">
  <span *ngIf="loading"
            class="d-flex justify-content-center">
    <i [ngClass]="[icons.large3x, icons.spinner, icons.spin]"></i>
  </span>
  <div *ngIf="!loading">
  <div class="row">
    <div class="col-lg-12">
      <div>
        <cd-table-actions class="btn-group mb-4 me-2"
                          [permission]="permission"
                          [selection]="selection"
                          [tableActions]="addRemoteClusterAction">
        </cd-table-actions>
      </div>
    </div>
    <div class="col-lg-2"
         *ngIf="queriesResults.CLUSTER_COUNT[0]">
      <cd-card cardTitle="Cluster Count"
               i18n-title
               class="col-sm-6 pb-3"
               aria-label="Cluster Count">
        <span class="text-center">
          <h1>{{ queriesResults.CLUSTER_COUNT[0][1] }}</h1>
        </span>
      </cd-card>
    </div>
    <div class="col-lg-2 align-cards">
      <cd-card cardTitle="Alerts Count"
               i18n-title
               class="col-sm-6"
               aria-label="Alerts Count">
        <span class="text-center">
          <h1>{{ queriesResults['ALERTS_COUNT'][0][1] }}</h1>
        </span>
      </cd-card>
    </div>
    <div class="col-lg-2 align-cards"
         *ngIf="queriesResults['TOTAL_CLUSTERS_CAPACITY'][0]">
      <cd-card cardTitle="Total Capacity"
               i18n-title
               class="col-sm-6 pb-3"
               aria-label="Total Capacity">
        <span class="text-center">
          <h1>{{ queriesResults['TOTAL_CLUSTERS_CAPACITY'][0][1] | dimlessBinary }}</h1>
        </span>
      </cd-card>
    </div>
    <div class="col-lg-2 align-cards"
         *ngIf="queriesResults['TOTAL_USED_CAPACITY'][0]">
      <cd-card cardTitle="Total Used Capacity"
               i18n-title
               class="col-sm-6 pb-3"
               aria-label="Total Used Capacity">
        <span class="text-center">
          <h1>{{ queriesResults['TOTAL_USED_CAPACITY'][0][1] | dimlessBinary }}</h1>
        </span>
      </cd-card>
    </div>
    <div class="col-lg-2 align-cards"
         *ngIf="queriesResults['TOTAL_USED_CAPACITY'][0]">
      <cd-card cardTitle="Total Used Capacity"
               i18n-title
               class="col-sm-6 pb-3"
               aria-label="Total Used Capacity">
        <span class="text-center">
          <h1>{{ queriesResults['TOTAL_USED_CAPACITY'][0][1] | dimlessBinary }}</h1>
        </span>
      </cd-card>
    </div>
    <div class="col-lg-2 align-cards"
         *ngIf="queriesResults['TOTAL_CLUSTERS_CAPACITY'][0] && queriesResults['TOTAL_USED_CAPACITY'][0]">
      <cd-card cardTitle="Total Available Capacity"
               i18n-title
               class="col-sm-6 pb-3"
               aria-label="Total Available Capacity">
        <span class="text-center">
          <h1>{{ ((queriesResults['TOTAL_CLUSTERS_CAPACITY'][0][1]) - (queriesResults['TOTAL_USED_CAPACITY'][0][1])) | dimlessBinary }}</h1>
        </span>
      </cd-card>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-3"
         *ngIf="queriesResults['HEALTH_OK_COUNT'][0] && queriesResults['HEALTH_WARNING_COUNT'][0]">
      <cd-card cardTitle="Status"
               i18n-title
               class="d-flex h-100"
               [justifyContentCenter]="true"
               [alignItemsCenter]="true"
               aria-label="Status">
          <div class="health-indicators">
            <div class="indicator me-4">
              <h3 class="status healthy">Healthy</h3>
              <span class="value pt-4"
                    *ngIf="queriesResults['HEALTH_OK_COUNT'][0]">{{ queriesResults['HEALTH_OK_COUNT'][0][1] }}</span>
            </div>
            <div class="indicator me-4">
              <h3 class="status warning">Warning</h3>
              <span class="value pt-4"
                    *ngIf="queriesResults['HEALTH_WARNING_COUNT'][0]">{{ queriesResults['HEALTH_WARNING_COUNT'][0][1] }}</span>
            </div>
            <div class="indicator me-4">
              <h3 class="status error">Error</h3>
              <span class="value pt-4">{{ queriesResults['HEALTH_ERROR_COUNT'][0][1] }}</span>
            </div>
        </div>   
      </cd-card>
    </div>
    <div class="col-lg-9">
      <cd-card  cardTitle="Cluster Details"
                i18n-title
                class="d-flex h-100"
                aria-label="Cluster Details">
        <div>
          <cd-table [data]="clusters"
                    [columns]="columns"
                    [limit]="4">
          </cd-table>
        </div>
      </cd-card>
    </div>
  </div>

  <div class="row pt-4">
    <div class="col-lg-3"
         *ngIf="queriesResults['CRITICAL_ALERTS_COUNT'][0] && queriesResults['WARNING_ALERTS_COUNT'][0]">
      <cd-card cardTitle="Alert Status"
               i18n-title
               class="d-flex h-100"
               [alignItemsCenter]="true"
               [justifyContentCenter]="true"
               aria-label="Alert Status">
          <div class="health-indicators">
            <div class="indicator me-4">
              <h3 class="status warning">Warning</h3>
              <span class="value pt-4"
                   *ngIf="queriesResults['WARNING_ALERTS_COUNT'][0]">{{ queriesResults['WARNING_ALERTS_COUNT'][0][1] }}</span>
            </div>
            <div class="indicator me-4">
              <h3 class="status error">Critical</h3>
              <span class="value pt-4"
                   *ngIf="queriesResults['CRITICAL_ALERTS_COUNT'][0]">{{ queriesResults['CRITICAL_ALERTS_COUNT'][0][1] }}</span>
            </div>
        </div>   
      </cd-card>
    </div>
    <div class="col-lg-9">
      <cd-card  cardTitle="Alert Details"
                i18n-title
                class="d-flex h-100"
                aria-label="Alert Details">
        <div>
          <cd-table [data]="alerts"
                    [columns]="alertColumns"
                    [limit]="4">
          </cd-table>
        </div>
      </cd-card>
    </div>
  </div>

  <div class="row pt-4">
    <div class="col-lg-6">
      <cd-card cardTitle="Cluster Utilization"
               i18n-title
               aria-label="Cluster Utilization card">
      <div class="ms-4 me-4 mt-0">
        <cd-dashboard-time-selector (selectedTime)="getPrometheusData($event)">
        </cd-dashboard-time-selector>
        <cd-dashboard-area-chart  chartTitle="Capacity"
                                  [label]="clusters[0].cluster"
                                  [label2]="clusters[1].cluster"
                                  dataUnits="B"
                                  [data]="queriesResults.CLUSTER_CAPACITY_UTILIZATION[0]"
                                  [data2]="queriesResults.CLUSTER_CAPACITY_UTILIZATION[1]">
        </cd-dashboard-area-chart>
        <cd-dashboard-area-chart chartTitle="IOPS"
                                [label]="clusters[0].cluster"
                                [label2]="clusters[1].cluster"
                                 dataUnits=""
                                 decimals="0"
                                 [data]="queriesResults.CLUSTER_IOPS_UTILIZATION[0]"
                                 [data2]="queriesResults.CLUSTER_IOPS_UTILIZATION[1]">
        </cd-dashboard-area-chart>
        <cd-dashboard-area-chart chartTitle="Client Throughput"
                                [label]="clusters[0].cluster"
                                [label2]="clusters[1].cluster"
                                 dataUnits="B/s"
                                 decimals="2"
                                 [data]="queriesResults.CLUSTER_THROUGHPUT_UTILIZATION[0]"
                                 [data2]="queriesResults.CLUSTER_THROUGHPUT_UTILIZATION[1]">
        </cd-dashboard-area-chart>
      </div>
    </cd-card>
    </div>


  <div class="col-lg-6">
    <cd-card cardTitle="Pools Utilization"
             i18n-title
             aria-label="Pools Utilization card">
    <div class="ms-4 me-4 mt-0">
      <cd-dashboard-time-selector (selectedTime)="getPrometheusData($event)">
      </cd-dashboard-time-selector>
      <cd-dashboard-area-chart  chartTitle="Capacity"
                                [label]="clusters[0].cluster + '-' + clusters[0].name"
                                [label2]="clusters[1].cluster"
                                dataUnits="B"
                                [data]="queriesResults.POOL_CAPACITY_UTILIZATION[0]"
                                [data2]="queriesResults.POOL_CAPACITY_UTILIZATION[1]">
      </cd-dashboard-area-chart>
      <cd-dashboard-area-chart chartTitle="IOPS"
                              [label]="clusters[0].cluster"
                              [label2]="clusters[1].cluster"
                               dataUnits=""
                               decimals="0"
                               [data]="queriesResults.POOL_IOPS_UTILIZATION[0]"
                               [data2]="queriesResults.POOL_IOPS_UTILIZATION[1]">
      </cd-dashboard-area-chart>
      <cd-dashboard-area-chart chartTitle="Client Throughput"
                              [label]="clusters[0].cluster"
                              [label2]="clusters[1].cluster"
                               dataUnits="B/s"
                               decimals="2"
                               [data]="queriesResults.POOL_THROUGHPUT_UTILIZATION[0]"
                               [data2]="queriesResults.POOL_THROUGHPUT_UTILIZATION[1]">
      </cd-dashboard-area-chart>
    </div>
  </cd-card>
  </div>
</div>
</div>
</div>
 